<mujoco model="robot_arm_4dof">
  <compiler angle="radian" meshdir="meshes"/>
  
  <option timestep="0.002" integrator="RK4"/>
  
  <visual>
    <headlight diffuse="0.6 0.6 0.6" ambient="0.3 0.3 0.3" specular="0 0 0"/>
    <rgba haze="0.15 0.25 0.35 1"/>
    <global azimuth="120" elevation="-20"/>
  </visual>
  
  <asset>
    <texture type="skybox" builtin="gradient" rgb1="0.3 0.5 0.7" rgb2="0 0 0" width="512" height="512"/>
    <texture name="groundplane" type="2d" builtin="checker" rgb1="0.2 0.3 0.4" rgb2="0.1 0.2 0.3" 
             width="300" height="300" mark="edge" markrgb="0.8 0.8 0.8"/>
    <material name="groundplane" texture="groundplane" texrepeat="5 5" texuniform="true" reflectance="0.2"/>
  </asset>

  <worldbody>
    <light pos="0 0 1.5" dir="0 0 -1" directional="false"/>
    <geom name="floor" pos="0 0 0" size="0 0 0.05" type="plane" material="groundplane"/>
    
    <!-- Base Link -->
    <body name="base_link" pos="0 0 0">
      <geom name="base_geom" type="cylinder" size="0.1 0.025" rgba="0.5 0.5 0.5 1" mass="1.0"/>
      <inertial pos="0 0 0.025" mass="1.0" diaginertia="0.01 0.01 0.01"/>
      
      <!-- Link 1 -->
      <body name="link1" pos="0 0 0.05">
        <joint name="joint1" type="hinge" axis="0 0 1" range="-3.14159 3.14159" damping="0.1"/>
        <geom name="link1_geom" type="cylinder" size="0.04 0.15" pos="0 0 0.15" rgba="0 0 0.8 1" mass="0.5"/>
        <inertial pos="0 0 0.15" mass="0.5" diaginertia="0.005 0.005 0.001"/>
        
        <!-- Link 2 -->
        <body name="link2" pos="0 0 0.3">
          <joint name="joint2" type="hinge" axis="0 1 0" range="-1.5708 1.5708" damping="0.1"/>
          <geom name="link2_geom" type="cylinder" size="0.035 0.125" pos="0 0 0.125" rgba="1 0.5 0 1" mass="0.4"/>
          <inertial pos="0 0 0.125" mass="0.4" diaginertia="0.004 0.004 0.001"/>
          
          <!-- Link 3 -->
          <body name="link3" pos="0 0 0.25">
            <joint name="joint3" type="hinge" axis="0 1 0" range="-1.5708 1.5708" damping="0.1"/>
            <geom name="link3_geom" type="cylinder" size="0.03 0.1" pos="0 0 0.1" rgba="0 0 0.8 1" mass="0.3"/>
            <inertial pos="0 0 0.1" mass="0.3" diaginertia="0.003 0.003 0.0005"/>
            
            <!-- End Effector -->
            <body name="end_effector" pos="0 0 0.2">
              <joint name="joint4" type="hinge" axis="0 0 1" range="-3.14159 3.14159" damping="0.05"/>
              <geom name="ee_geom" type="cylinder" size="0.025 0.05" pos="0 0 0.05" rgba="0.8 0 0 1" mass="0.2"/>
              <inertial pos="0 0 0.05" mass="0.2" diaginertia="0.001 0.001 0.0002"/>
              
              <!-- End effector tip (for visualization/target) -->
              <site name="ee_tip" pos="0 0 0.1" size="0.01" rgba="1 1 0 1"/>
            </body>
          </body>
        </body>
      </body>
    </body>
  </worldbody>
  
  <actuator>
    <!-- Position servos for each joint -->
    <position name="actuator1" joint="joint1" kp="100" kv="10" ctrlrange="-3.14159 3.14159"/>
    <position name="actuator2" joint="joint2" kp="100" kv="10" ctrlrange="-1.5708 1.5708"/>
    <position name="actuator3" joint="joint3" kp="100" kv="10" ctrlrange="-1.5708 1.5708"/>
    <position name="actuator4" joint="joint4" kp="50" kv="5" ctrlrange="-3.14159 3.14159"/>
  </actuator>
  
  <sensor>
    <!-- Joint position sensors -->
    <jointpos name="joint1_pos" joint="joint1"/>
    <jointpos name="joint2_pos" joint="joint2"/>
    <jointpos name="joint3_pos" joint="joint3"/>
    <jointpos name="joint4_pos" joint="joint4"/>
    
    <!-- Joint velocity sensors -->
    <jointvel name="joint1_vel" joint="joint1"/>
    <jointvel name="joint2_vel" joint="joint2"/>
    <jointvel name="joint3_vel" joint="joint3"/>
    <jointvel name="joint4_vel" joint="joint4"/>
    
    <!-- End effector position -->
    <framepos name="ee_position" objtype="site" objname="ee_tip"/>
  </sensor>
</mujoco>
